"use strict";var App=App||{};App.init=function(){this.apiUrl="http://localhost:3000/api",this.$main=$("main"),$(".register").on("click",this.register.bind(this)),$(".members").on("click",this.membersIndex.bind(this)),$("main").on("submit","form",this.handleForm)},App.getToken=function(){return window.localStorage.getItem("token")},App.setToken=function(e){return window.localStorage.setItem("token",e)},App.setRequestHeader=function(e){return e.setRequestHeader("Authorization","Bearer "+App.getToken())},App.membersIndex=function(e){var t=this;e&&e.preventDefault();var n=this.apiUrl+"/users";$.ajax({url:n,beforeSend:this.setRequestHeader.bind(this)}).done(function(e){t.$main.html('\n      <div class="card-deck-wrapper">\n        <div class="card-deck">\n        </div>\n      </div>\n    ');var n=t.$main.find(".card-deck");$.each(e.users,function(e,t){n.append('\n        <div class="card col-md-4">\n         <img class="card-img-top" src="#" alt="Card image cap">\n         <div class="card-block">\n           <h4 class="card-title">'+t.username+'</h4>\n           <p class="card-text">This is a longer card with supporting text below as a natural lead-in to additional content. This content is a little bit longer.</p>\n           <p class="card-text"><small class="text-muted">Last updated 3 mins ago</small></p>\n         </div>\n       </div>')}).fail(function(e){console.log(e)})})},App.handleForm=function(e){e&&e.preventDefault();var t=""+App.apiUrl+$(this).attr("action"),n=$(this).attr("method"),a=$(this).serialize();$.ajax({url:t,method:n,data:a}).done(function(e){e.token&&App.setToken(e.token)}).fail(function(e){console.log(e)})},App.register=function(e){e&&e.preventDefault(),this.$main.html('\n    <h2>Register</h2>\n  <form method="post" action="/register">\n    <div class="form-group">\n      <input class="form-control" type="text" name="user[username]" placeholder="Username">\n    </div>\n    <div class="form-group">\n      <input class="form-control" type="email" name="user[email]" placeholder="Email">\n    </div>\n    <div class="form-group">\n      <input class="form-control" type="password" name="user[password]" placeholder="Password">\n    </div>\n    <div class="form-group">\n      <input class="form-control" type="password" name="user[passwordConfirmation]" placeholder="Password Confirmation">\n    </div>\n    <input class="btn btn-primary" type="submit" value="Register">\n  </form>')},$(App.init.bind(App));