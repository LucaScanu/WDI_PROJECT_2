"use strict";var App=App||{},google=google;App.init=function(){this.apiUrl="http://localhost:3000/api",this.$main=$("main"),$(".register").on("click",this.register.bind(this)),$("main").on("submit","form",this.handleForm)},App.surfInfo=function(e,t){google.maps.event.addListener(t,"click",function(){$.get("http://localhost:3000/api/weather/"+e.lat+"/"+e.lng).done(function(t){$(".modal-body").html('\n        <ul class="nav nav-tabs" role="tablist">\n          <li role="presentation" class="active">\n            <a href="#home" aria-controls="home" role="tab" data-toggle="tab">Overview</a>\n          </li>\n          <li role="presentation">\n            <a href="#weather" aria-controls="weather" role="tab" data-toggle="tab">Weather</a>\n          </li>\n          <li role="presentation">\n            <a href="#gallery" aria-controls="gallery" role="tab" data-toggle="tab">Gallery</a>\n          </li>\n          <li role="presentation">\n            <a href="#settings" aria-controls="settings" role="tab" data-toggle="tab">Settings</a>\n          </li>\n        </ul>\n\n        <!-- Tab panes -->\n        <div class="tab-content">\n          <div role="tabpanel" class="tab-pane active" id="home">\n            Welcome to '+e.name+",\n            "+e.location+".\n            The weather for today is "+t.summary+'.\n          </div>\n          <div role="tabpanel" class="tab-pane" id="weather">\n            <iframe src="https://embed.windytv.com/?'+e.lat+","+e.lng+',5,in:24,100m,waves,message,menu,marker,metric.wind.km/h" width="900" height="500" frameborder="0"></iframe>\n          </div>\n          <div role="tabpanel" class="tab-pane" id="gallery">\n\n          </div>\n          <div role="tabpanel" class="tab-pane" id="settings">\n          </div>\n        </div>'),$(".modal").modal("show")})})},App.marker=function(e){var t=new google.maps.LatLng(e.lat,e.lng),a=new google.maps.Marker({position:t,map:App.map});App.surfInfo(e,a)},App.loopSurfs=function(e){$.each(e.surfs,function(e,t){App.marker(t)})},App.getSurfs=function(){$.get("http://localhost:3000/api/surfs").done(this.loopSurfs)},App.initMap=function(){var e=document.getElementById("map"),t={center:new google.maps.LatLng(13.8302704,17.8480856),zoom:2,mapTypeId:google.maps.MapTypeId.ROADMAP,styles:[{featureType:"administrative",elementType:"labels.text.fill",stylers:[{color:"#444444"}]},{featureType:"landscape",elementType:"all",stylers:[{color:"#f2f2f2"}]},{featureType:"poi",elementType:"all",stylers:[{visibility:"off"}]},{featureType:"road",elementType:"all",stylers:[{saturation:-100},{lightness:45}]},{featureType:"road.highway",elementType:"all",stylers:[{visibility:"simplified"}]},{featureType:"road.arterial",elementType:"labels.icon",stylers:[{visibility:"off"}]},{featureType:"transit",elementType:"all",stylers:[{visibility:"off"}]},{featureType:"water",elementType:"all",stylers:[{color:"#46bcec"},{visibility:"on"}]}]};this.map=new google.maps.Map(e,t),this.getSurfs()},App.handleForm=function(e){e&&e.preventDefault();var t=""+App.apiUrl+$(this).attr("action"),a=$(this).attr("method"),n=$(this).serialize();$.ajax({url:t,method:a,data:n}).done(function(e){console.log(e)}).fail(function(e){console.log(e)})},App.register=function(e){e&&e.preventDefault(),this.$main.html('\n    <h2>Register</h2>\n  <form method="post" action="/register">\n    <div class="form-group">\n      <input class="form-control" type="text" name="user[username]" placeholder="Username">\n    </div>\n    <div class="form-group">\n      <input class="form-control" type="email" name="user[email]" placeholder="Email">\n    </div>\n    <div class="form-group">\n      <input class="form-control" type="password" name="user[password]" placeholder="Password">\n    </div>\n    <div class="form-group">\n      <input class="form-control" type="password" name="user[passwordConfirmation]" placeholder="Password Confirmation">\n    </div>\n    <input class="btn btn-primary" type="submit" value="Register">\n  </form>')},$(App.init.bind(App));